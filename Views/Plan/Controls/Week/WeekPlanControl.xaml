<UserControl x:Class="HyunDaiINJ.Views.Plan.Controls.Week.WeekPlanControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
             mc:Ignorable="d" 
             d:DesignHeight="750" d:DesignWidth="1350">

    <Grid Background="#F0F0F0">
        
        <Grid.RowDefinitions>
            <RowDefinition Height="35" />
            <RowDefinition Height="40" />
            <RowDefinition Height="40" />
            <RowDefinition Height="35" />
            <RowDefinition Height="3*" />
            <!-- 헤더 -->
            <RowDefinition Height="*" />
            <!-- 스크롤 가능한 데이터 그리드 -->
            <RowDefinition Height="50" />
            <!-- 고정된 계획 총합 -->
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="10">
            <TextBlock Text="제품명:"
               VerticalAlignment="Center" 
               Margin="5" />
            <TextBox Text="{Binding PartIdHeader, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
             Width="200" 
             VerticalAlignment="Center" 
             Margin="5" />
        </StackPanel>


        <Grid Grid.Row="0" Margin="5" Grid.ColumnSpan="3">
            <!-- 헤더 -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                <materialDesign:PackIcon Foreground="#002E6B" Kind="CircleOutline" Height="20" Width="40" VerticalAlignment="Center"/>
                <TextBlock Text="총 계획"
               FontSize="18" 
               FontWeight="Bold" 
               Foreground="#002E6B" 
               VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
            <!-- 밑줄 -->
        <Border Grid.ColumnSpan="7" Background="#002E6B" Height="1" VerticalAlignment="Bottom" Margin="0,0,0,3" />

        <!-- 헤더 -->
        <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="5" VerticalAlignment="Center" HorizontalAlignment="Center">
            <TextBlock Text="제품명"
                   FontSize="20" 
                   FontWeight="Bold" 
                   Foreground="#002E6B" 
                   VerticalAlignment="Center"/>
        </StackPanel>
        
        <!-- 헤더 -->
        <StackPanel Orientation="Horizontal" Grid.Row="2" Margin="5" VerticalAlignment="Center" HorizontalAlignment="Center">
            <TextBlock Text="총 개수"
                   FontSize="20" 
                   FontWeight="Bold" 
                   Foreground="#002E6B" 
                   VerticalAlignment="Center"/>
        </StackPanel>
        <!-- 헤더 -->
        <StackPanel Orientation="Horizontal" Grid.Row="3" Margin="5">
            <materialDesign:PackIcon Foreground="#002E6B" Kind="CircleOutline" Height="20" Width="40" VerticalAlignment="Center"/>
            <TextBlock Text="주 계획"
                       FontSize="16" 
                       FontWeight="Bold" 
                       Foreground="#002E6B" 
                       VerticalAlignment="Center"/>
        </StackPanel>

        <!-- 1번제품 입력-->
        <Grid Grid.Column="1" Grid.Row="1">
            <Border Margin="3" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Background="Transparent">
                <TextBox Text="{Binding PartIdHeader, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                     Foreground="Black" 
                     VerticalAlignment="Stretch" 
                     HorizontalAlignment="Stretch" 
                     FontWeight="Bold" 
                     FontSize="13" 
                     IsReadOnly="False" 
                     IsEnabled="True"/>
            </Border>
        </Grid>

        <Grid Grid.Column="1" Grid.Row="2">
            <Border Margin="3"  BorderBrush="#444" BorderThickness="1" CornerRadius="5">
                <TextBox Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="20"/>
            </Border>
        </Grid>

        <!-- 2번제품 입력-->
        <Grid Grid.Column="2" Grid.Row="1">
            <Border Margin="3" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Background="Transparent">
                <TextBox Text="{Binding PartIdInputFirst, UpdateSourceTrigger=PropertyChanged}" 
                     Foreground="Black" 
                     VerticalAlignment="Stretch" 
                     HorizontalAlignment="Stretch" 
                     FontWeight="Bold" 
                     FontSize="13" 
                     IsReadOnly="False" 
                     IsEnabled="True"/>
            </Border>
        </Grid>

        <Grid Grid.Column="2" Grid.Row="2">
            <Border Margin="3"  BorderBrush="#444" BorderThickness="1" CornerRadius="5">
                <TextBox Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="20"/>
            </Border>
        </Grid>

        <!-- 3번 제품 입력 -->
        <Grid Grid.Column="3" Grid.Row="1">
            <Border Margin="3" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Background="Transparent">
                <TextBox Text="{Binding PartIdInputFirst, UpdateSourceTrigger=PropertyChanged}" 
                     Foreground="Black" 
                     VerticalAlignment="Stretch" 
                     HorizontalAlignment="Stretch" 
                     FontWeight="Bold" 
                     FontSize="13" 
                     IsReadOnly="False" 
                     IsEnabled="True"/>
            </Border>
        </Grid>


        <Grid Grid.Column="3" Grid.Row="2">
            <Border Margin="3"  BorderBrush="#444" BorderThickness="1" CornerRadius="5">
                <TextBox Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="20"/>
            </Border>
        </Grid>

        <!-- 4번 제품 입력 -->
        <Grid Grid.Column="4" Grid.Row="1">
            <Border Margin="3" BorderBrush="#444" BorderThickness="1" CornerRadius="5" Background="Transparent">
                <TextBox Text="{Binding PartIdInputFirst, UpdateSourceTrigger=PropertyChanged}" 
                     Foreground="Black" 
                     VerticalAlignment="Stretch" 
                     HorizontalAlignment="Stretch" 
                     FontWeight="Bold" 
                     FontSize="13" 
                     IsReadOnly="False" 
                     IsEnabled="True"/>
            </Border>
        </Grid>

        <Grid Grid.Column="4" Grid.Row="2">
            <Border Margin="3"  BorderBrush="#444" BorderThickness="1" CornerRadius="5">
                <TextBox Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="20"/>
            </Border>
        </Grid>

        <!-- 저장 버튼-->
        <Button Content="저장" Width="100" Height="45" Margin="5" Grid.Row="1" Grid.RowSpan="2"  Grid.Column="5" Background="#3670c4" Foreground="White" FontWeight="Bold" FontSize="20" >
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}" 
                        BorderBrush="{TemplateBinding BorderBrush}" 
                        BorderThickness="{TemplateBinding BorderThickness}" 
                        CornerRadius="5">
                        <ContentPresenter HorizontalAlignment="Center" 
                                      VerticalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Button.Template>
        </Button>


        <!-- 수정 버튼-->
        <Button Content="수정" Width="100" Height="45" Margin="5" Grid.Row="1" Grid.RowSpan="2"  Grid.Column="6" Background="#cbbf4b" Foreground="White" FontWeight="Bold" FontSize="20" >
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}" 
                BorderBrush="{TemplateBinding BorderBrush}" 
                BorderThickness="{TemplateBinding BorderThickness}" 
                CornerRadius="5">
                        <ContentPresenter HorizontalAlignment="Center" 
                              VerticalAlignment="Center"/>
                    </Border>
                </ControlTemplate>
            </Button.Template>
        </Button>

        <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Row="4" Grid.ColumnSpan="7" Grid.RowSpan="2">
            <DataGrid ItemsSource="{Binding WeekPlans}" AutoGenerateColumns="False" Margin="10">
                <DataGrid.Columns>
                    <!-- 주차 컬럼 -->
                    <DataGridTemplateColumn Header="주차" Width="100" IsReadOnly="True">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Week, StringFormat={}{0}주차}" 
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Center" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <!-- PartId 컬럼 -->
                    <DataGridTemplateColumn Width="200">
                        <DataGridTemplateColumn.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding DataContext.PartIdHeader, RelativeSource={RelativeSource AncestorType=UserControl}}"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center" />
                            </DataTemplate>
                        </DataGridTemplateColumn.HeaderTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding PartId}" 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Center" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </ScrollViewer>


        <!-- 고정된 계획 총합 -->
        <Grid Grid.Row="6" Background="#E0E0E0" Grid.ColumnSpan="7">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <!-- 주차 -->
                <ColumnDefinition Width="*"/>
                <!-- AAA -->
                <ColumnDefinition Width="*"/>
                <!-- BBB -->
                <ColumnDefinition Width="*"/>
                <!-- CCC -->
                <ColumnDefinition Width="*"/>
                <!-- DDD -->
                <ColumnDefinition Width="Auto"/>
                <!-- 여유 공간 -->
            </Grid.ColumnDefinitions>

            <!-- 각 열에 총합 표시 -->
            <TextBlock Grid.Column="0" Text="계획 총합" FontSize="16" FontWeight="Bold" Foreground="#002E6B" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            <TextBlock Grid.Column="1" Text="{Binding TotalPlanQuantity}" FontSize="16" FontWeight="Bold" Foreground="#002E6B" VerticalAlignment="Center" HorizontalAlignment="Center"/>
        </Grid>
    </Grid>
</UserControl>
